<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지사항</title>
    <link rel="stylesheet" href="/css/css.css">
</head>
<body>
    <div class="board_wrap">
        <div class="board_title">
            <strong>공지사항</strong>
            <p>공지사항을 빠르고 정확하게 안내해드립니다.</p>
        </div>
        <div class="board_list_wrap">
            <div class="board_list">
            </div>
<!--            <div class="board_page">-->
<!--                <a href="#" class="bt first"><<</a>-->
<!--                <a href="#" class="bt prev"><</a>-->
<!--                <a href="#" class="num on">1</a>-->
<!--                <a href="#" class="num">2</a>-->
<!--                <a href="#" class="num">3</a>-->
<!--                <a href="#" class="num">4</a>-->
<!--                <a href="#" class="num">5</a>-->
<!--                <a href="#" class="bt next">></a>-->
<!--                <a href="#" class="bt last">>></a>-->
<!--            </div>-->
            <div class="bt_wrap">
                <a href="/community/write" class="on">등록</a>
                <!--<a href="#">수정</a>-->
            </div>
        </div>
    </div>
    <script>
        const $contents = document.querySelector('.board_list');
        fetch("/api/getCommunity", {
            method: 'get',
            headers: {
                'content-type': 'application/json',
                'Authorization': localStorage.getItem('jwt')
            }
        }).then(res => res.json())
            .then(community => {
                console.log(community)
                if(community.status !== 401) {
                    let str ='<div class="top">\n' +
                        '                    <div class="num">번호</div>\n' +
                        '                    <div class="title">제목</div>\n' +
                        '                    <div class="writer">글쓴이</div>\n' +
                        '                    <div class="date">작성일</div>\n' +
                        '                </div>';
                    for(let i=0; i<community.length; i++) {
                        str += `<div>
                                    <div class="num">${i+1}</div>
                                    <div class="title"><a href="/community/${community[i].id}">${community[i].title}</a></div>
                                    <div class="writer">${community[i].username}</div>
                                    <div class="date">${community[i].write_date}</div>
                                </div>`
                    }
                    $contents.innerHTML = str;
                } else {
                    $contents.innerHTML = '<div><div>로그인해주세요.</div></div>'
                }
            });
    </script>
</body>
</html> 